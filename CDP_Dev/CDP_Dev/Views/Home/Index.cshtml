@{
    ViewData["Title"] = "Home Page";
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
<style type="text/css">
    .glyphicon-plus-sign:before {
        color: #5cb85c;
    }

    .glyphicon-minus-sign:before {
        color: #d9534f
    }

    .list-group-item > .badge {
        background-color: #17a2b8
    }

    /*.dataTables_wrapper .form-control {
        font-size: 10px;
        height: 25px;
        font-weight: bold;
    }*/

    .pagination > li > a {
        padding: 0px 6px !important;
    }

    .treeview span.icon {
        font-size: 18px !important;
    }

    .list-group-item {
        padding: 5px 10px !important;
    }

    /*.table > thead > tr > th, .table > tbody > tr > td {
        padding: 6px !important;
    }*/
</style>
@*<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <img src="~/images/banner1.svg" alt="ASP.NET" class="img-responsive" />
                <div class="carousel-caption" role="option">
                    <p>
                        Learn how to build ASP.NET apps that can run anywhere.
                        <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525028&clcid=0x409">
                            Learn More
                        </a>
                    </p>
                </div>
            </div>
            <div class="item">
                <img src="~/images/banner2.svg" alt="Visual Studio" class="img-responsive" />
                <div class="carousel-caption" role="option">
                    <p>
                        There are powerful new features in Visual Studio for building modern web apps.
                        <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525030&clcid=0x409">
                            Learn More
                        </a>
                    </p>
                </div>
            </div>
            <div class="item">
                <img src="~/images/banner3.svg" alt="Microsoft Azure" class="img-responsive" />
                <div class="carousel-caption" role="option">
                    <p>
                        Learn how Microsoft's Azure cloud platform allows you to build, deploy, and scale web apps.
                        <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525027&clcid=0x409">
                            Learn More
                        </a>
                    </p>
                </div>
            </div>
        </div>
        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>*@
<div class="row">
    <div class="col-md-6">
        <h2>Career Development Plan</h2>
    </div>
    @*<div class="col-md-3">
            <h2>How to</h2>
            <ul>
                <li><a href="https://go.microsoft.com/fwlink/?LinkID=398600">Add a Controller and View</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkId=699315">Manage User Secrets using Secret Manager.</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkId=699316">Use logging to log a message.</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkId=699317">Add packages using NuGet.</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkId=699319">Target development, staging or production environment.</a></li>
            </ul>
        </div>
        <div class="col-md-3">
            <h2>Overview</h2>
            <ul>
                <li><a href="https://go.microsoft.com/fwlink/?LinkId=518008">Conceptual overview of what is ASP.NET Core</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkId=699320">Fundamentals of ASP.NET Core such as Startup and middleware.</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkId=398602">Working with Data</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkId=398603">Security</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkID=699321">Client side development</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkID=699322">Develop on different platforms</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkID=699323">Read more on the documentation site</a></li>
            </ul>
        </div>
        <div class="col-md-3">
            <h2>Run &amp; Deploy</h2>
            <ul>
                <li><a href="https://go.microsoft.com/fwlink/?LinkID=517851">Run your app</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkID=517853">Run tools such as EF migrations and more</a></li>
                <li><a href="https://go.microsoft.com/fwlink/?LinkID=398609">Publish to Microsoft Azure Web Apps</a></li>
            </ul>
        </div>*@
</div>
<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <div class="container-fluid">
                <label class="control-label"></label>
                <select id="UserId" class="form-control" asp-items="@(new SelectList(@ViewBag.UserList,"Id", "Name"))"> </select>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <h4>Employee Detail</h4>
        <div class="col-sm-12">
            <div class="container-fluid">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Trigram</th>
                            <th scope="col">Manager</th>
                            <th scope="col">Manager Trigram</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td id="thName"></td>
                            <td id="thTrigram"></td>
                            <td id="thManager"></td>
                            <td id="thManagerTrigram"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row">
        <h4>Aspiration</h4>
        <div class="col-sm-12">
            <table id="aspiration" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Description</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <div class="row">
        <h4>Enablement</h4>
        <div class="col-sm-12">
            <div id="treeview" class="container-fluid"></div>
        </div>
    </div>
    <div class="row">
        <h4>Mentor</h4>
        <div class="col-sm-12">
            <table id="mentor" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Mentor</th>
                        <th>Training Category</th>
                        <th>Comment</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <div class="row">
        <h4>Allocation</h4>
        <div class="col-sm-12">
            <table id="allocation" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Allocation</th>
                        <th>Comment</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <div class="row">
        <h4>Internal</h4>
        <div class="col-sm-12">
            <table id="internal" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Topic</th>
                        <th>Training Mode</th>
                        <th>Comment</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <br />
    <div class="row">
        @*<input type="button"
            value="Generetae PDF"
            onclick="location.href='@Url.Action("CreatePdf", "Home", new { id = 10})'" />*@
        <a class="btn btn-default" id="GeneratePDF" href="@Url.Action("CreateMigraDocPdf", "Home", new { id = 0})" target="_blank"><span style="color:#ff0000" class="glyphicon glyphicon-file"></span> Generate PDF</a>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $(document).ajaxStart(function () {
            $("#wait").css("display", "block");
        });
        $(document).ajaxError(function () {
            $("#wait").css("display", "none");
        });
        $(document).ajaxComplete(function () {
            $("#wait").css("display", "none");
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        //var UserId = getUrlVars()["UserId"];
        var UserId = localStorage.getItem("UserId");
        if (UserId != null) {
            $("#UserId").val(UserId);
            LoadAllData(UserId);
        }
        else {
            LoadAllData($("#UserId").val());
            setUserIdForLink($("#UserId").val());
        }

        $("#GeneratePDF").attr("href", "/Home/CreateMigraDocPdf/" + $("#UserId").val());
        
        $("#UserId").change(function () {
            var Id = $("#UserId").val();
            $("#GeneratePDF").attr("href", "/Home/CreateMigraDocPdf/" + Id);
            LoadAllData(Id);
            setUserIdForLink(Id);
        });

        function LoadAllData(Id) {
            $.ajax({
                url: '/Home/LoadTrainingData/' + Id
            }).done(function (data) {
                var tree = $('#treeview').treeview({
                    levels: 2,
                    highlightSelected: false,
                    showTags: true,
                    expandIcon: 'glyphicon glyphicon-plus-sign',
                    collapseIcon: 'glyphicon glyphicon-minus-sign',
                    //nodeIcon: "glyphicon glyphicon-exclamation-sign",
                    data: data.treedata
                });
            });

            $("#aspiration").DataTable({
                destroy: true,
                "processing": true,
                "serverSide": false,
                "filter": true,
                "orderMulti": false,
                "ajax": {
                    "url": "/Aspiration/LoadUserAspirationData/" + Id,
                    "type": "POST",
                    "datatype": "json"
                },
                "contentType": "application/json",
                "columns": [
                    { "data": "Id", "name": "Id", "autoWidth": true, "visible": false },
                    { "data": "Description", "name": "Description", "autoWidth": true },
                ]
            });

            $("#mentor").DataTable({
                destroy: true,
                "processing": true,
                "serverSide": false,
                "filter": true,
                "orderMulti": false,
                "ajax": {
                    "url": "/Mentor/LoadUserMentorData/" + Id,
                    "type": "POST",
                    "datatype": "json"
                },
                "contentType": "application/json",
                "columns": [
                    { "data": "Id", "name": "Id", "autoWidth": true, "visible": false },
                    { "data": "Mentor", "name": "Mentor", "autoWidth": true },
                    { "data": "TrainingCategory", "name": "TrainingCategory", "autoWidth": true },
                    { "data": "Comment", "name": "Comment", "autoWidth": true }
                ]
            });

            $("#allocation").DataTable({
                destroy: true,
                "processing": true,
                "serverSide": false,
                "filter": true,
                "orderMulti": false,
                "ajax": {
                    "url": "/Allocation/LoadUserAllocationData/" + Id,
                    "type": "POST",
                    "datatype": "json"
                },
                "contentType": "application/json",
                "columns": [
                    { "data": "Id", "name": "Id", "autoWidth": true, "visible": false },
                    { "data": "Allocation", "name": "Allocation", "autoWidth": true },
                    { "data": "Comment", "name": "Comment", "autoWidth": true }
                ]
            });

            $("#internal").DataTable({
                destroy: true,
                "processing": true,
                "serverSide": false,
                "filter": true,
                "orderMulti": false,
                "ajax": {
                    "url": "/Internal/LoadUserInternalData/" + Id,
                    "type": "POST",
                    "datatype": "json"
                },
                "contentType": "application/json",
                "columns": [
                    { "data": "Id", "name": "Id", "autoWidth": true, "visible": false },
                    { "data": "Topic", "name": "Topic", "autoWidth": true },
                    { "data": "TrainingMode", "name": "TrainingMode", "autoWidth": true },
                    { "data": "Description", "name": "Description", "autoWidth": true }
                ]
            });

            $.ajax({
                url: '/User/LoadUserData/' + Id
            }).done(function (data) {
                $("#thName").text(data.data.Name);
                $("#thTrigram").text(data.data.Trigram);
                $("#thManager").text(data.data.Manager);
                $("#thManagerTrigram").text(data.data.ManagerTrigram);
            });
        }

        function getUrlVars() {
            var vars = [], hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            return vars;
        }
    });
</script>